"use strict";(()=>{var e={};e.id=380,e.ids=[380],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},83798:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>q,patchFetch:()=>k,requestAsyncStorage:()=>x,routeModule:()=>f,serverHooks:()=>h,staticGenerationAsyncStorage:()=>S});var t={};r.r(t),r.d(t,{DELETE:()=>y,GET:()=>m});var o=r(49303),n=r(88716),i=r(60670),a=r(87568),u=r(11185),p=r.n(u);let c=new(p()).Schema({startDate:{type:String,required:!0},endDate:{type:String,required:!0},productName:{type:String,required:!0},price:{type:Number,required:!0},offer:{type:String},image:{type:String,required:!0},user:{type:p().Schema.Types.ObjectId,ref:"User"}}),d=p().models.Booking||p().model("Booking",c);var l=r(60063),g=r(87070);async function m(e,{params:s}){await (0,a.Z)();let{id:r}=s;console.log("dynamic Id:",r);try{if(!r)return g.NextResponse.json({success:!1,message:"no user found"},{status:404});let e=await l.Z.findById(r).populate("bookings");return g.NextResponse.json({success:!0,data:e})}catch(e){return console.log(e),g.NextResponse.json({success:!1,message:"ID Is missing"})}}async function y(e,{params:s}){await (0,a.Z)();let{id:r}=s;try{if(!r)return g.NextResponse.json({success:!1,message:"ID is missing"});if(!await d.findByIdAndDelete(r))return g.NextResponse.json({success:!1,message:"Booking not found"},{status:404});return g.NextResponse.json({success:!0,message:"Booking deleted successfully"})}catch(e){return console.error("Error deleting booking:",e),g.NextResponse.json({success:!1,message:"Server error",error:e.message},{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/users/[id]/route",pathname:"/api/users/[id]",filename:"route",bundlePath:"app/api/users/[id]/route"},resolvedPagePath:"C:\\Users\\Udayk\\Desktop\\resort-booking-app\\my-app\\src\\app\\api\\users\\[id]\\route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:x,staticGenerationAsyncStorage:S,serverHooks:h}=f,q="/api/users/[id]/route";function k(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:S})}},87568:(e,s,r)=>{r.d(s,{Z:()=>o});let{default:t}=r(11185),o=async()=>{try{await t.connect(process.env.MONGO_URI),console.log("successfully mongoose connected")}catch(e){console.log(e)}}},60063:(e,s,r)=>{r.d(s,{Z:()=>i});var t=r(11185),o=r.n(t);let n=new(o()).Schema({username:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,required:!0,default:"user"},booking:{type:o().Schema.Types.ObjectId,ref:"Booking"}}),i=o().models.User||o().model("User",n)}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,972],()=>r(83798));module.exports=t})();