"use strict";(()=>{var e={};e.id=749,e.ids=[749],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71017:e=>{e.exports=require("path")},67565:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>w,staticGenerationAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>m,POST:()=>g});var s=r(49303),o=r(88716),i=r(60670),n=r(87568);let u=require("fs/promises");var d=r(71017),p=r.n(d),c=r(26508),l=r(87070);async function m(){await (0,n.Z)();let e=await c.Z.find({});return l.NextResponse.json({data:e})}async function g(e){try{await (0,n.Z)();let t=await e.formData(),r=t.get("title"),a=t.get("price"),s=t.get("offer"),o=t.get("amen"),i=t.get("desc"),d=t.get("image"),l=p().join(process.cwd(),"public","uploads");await (0,u.mkdir)(l,{recursive:!0});let m=Buffer.from(await d.arrayBuffer()),g=p().join(l,d.name);await (0,u.writeFile)(g,m);let f=new c.Z({title:r,price:a,offer:s,amen:o,desc:i,image:`/uploads/${d.name}`});return await f.save(),new Response(JSON.stringify({success:!0,message:"Product created successfully"}),{status:200})}catch(e){return console.error("Error:",e),new Response(JSON.stringify({success:!1,message:"Product creation failed"}),{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/add-product/route",pathname:"/api/admin/add-product",filename:"route",bundlePath:"app/api/admin/add-product/route"},resolvedPagePath:"C:\\Users\\Udayk\\Desktop\\resort-booking-app\\my-app\\src\\app\\api\\admin\\add-product\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:v,serverHooks:w}=f,h="/api/admin/add-product/route";function x(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:v})}},87568:(e,t,r)=>{r.d(t,{Z:()=>s});let{default:a}=r(11185),s=async()=>{try{await a.connect(process.env.MONGO_URI),console.log("successfully mongoose connected")}catch(e){console.log(e)}}},26508:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(11185),s=r.n(a);let o=new(s()).Schema({title:{type:String,required:!0},desc:{type:String},price:{type:Number,required:!0},offer:{type:String},image:{type:String},amen:{type:[String],default:["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast"],set:function(e){return"string"==typeof e&&(e=e.split(",").map(e=>e.trim())),Array.from(new Set(["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast",...e]))}}}),i=s().models.Product||s().model("Product",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(67565));module.exports=a})();